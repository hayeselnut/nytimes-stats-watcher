(this["webpackJsonpnytimes-stats-watcher"]=this["webpackJsonpnytimes-stats-watcher"]||[]).push([[0],{187:function(e,t,n){},195:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyALZRL58MlwX9LbNpKfJocR9TMWSpvc854","authDomain":"nytimes-stats-watcher.firebaseapp.com","projectId":"nytimes-stats-watcher","storageBucket":"nytimes-stats-watcher.appspot.com","messagingSenderId":"778428002319","appId":"1:778428002319:web:1e94b15350176b5757b37a","measurementId":"G-DWGWJEN5V6"}')},341:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(67),s=n.n(c),i=n(353),o=n(27),l=n(191),u=n.n(l),d={blue:"#4d88f9",teal:"#00a2b3",lime:"#5BC383",green:"#b5e352",yellow:"#f7da21",orange:"#fb9b00",red:"#e05c56",purple:"#D57DE8",pink:"#FF7DBB",poop:"#C4A574",brown:"#A1627E",darkBlue:"#2860d8"},j=function(e){return new u.a(e).darken(.15).string()},b=Object(o.a)(Object(o.a)({},d),{white:"#ffffff",offWhite:"#FAFAFA",lightGrey:"#cccccc",grey:"#959595",darkGrey:"#333333",black:"#000000"}),f=n(3),h={h1:{fontFamily:"Karnak",fontWeight:"normal",fontStretch:"normal",fontSize:"2.4rem",marginTop:-6},h2:{fontFamily:"Karnak",fontWeight:400,fontSize:"2.625rem",fontStretch:"condensed",lineHeight:"3.4125rem",letterSpacing:"0.05rem"},h3:{fontFamily:"Franklin",fontWeight:"bold"},h4:{fontFamily:"Stymie",fontSize:"1.125rem",color:b.white},h5:{fontFamily:"Franklin",fontWeight:"bold",textTransform:"uppercase",fontSize:"12px",lineHeight:"14px",letterSpacing:"0.75px",marginTop:"15px"}},m=function(e){var t=e.level,n=e.content,r=e.textAlign;return Object(f.jsx)(i.a,{as:t,style:h[t],content:n,textAlign:r||"left",children:e.children})},p=n.p+"static/media/games.aa530815.svg",x={height:"65px",display:"flex",alignItems:"center",justifyContent:"center"},O=function(){return Object(f.jsxs)("div",{style:x,children:[Object(f.jsx)("img",{src:p}),Object(f.jsx)(m,{level:"h1",content:"Stats Watcher"})]})},y=n(62),g=n.n(y),v=n(99),w=n(13),k=n(356),S=n(19),F=n(129),I=function(e){return new Date(e).toDateString().slice(4,-5)},C=function(e){var t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n<10?"0":"").concat(n)},A=n(352),z=function(e){var t=e.state,n=e.setState,r=e.buttons,a=e.vertical,c={margin:"1rem ".concat(a?"-8rem":"0"),transform:a?"rotate(-90deg)":"none"},s=function(e,n,r){return{width:150,height:"2rem",fontWeight:"normal",padding:"0 1rem",backgroundColor:t===e?b.blue:b.white,color:t===e?b.white:b.blue,borderRadius:n?"100px 0px 0px 100px":r?"0px 100px 100px 0px":"0px",borderStyle:"solid",borderColor:t===e?"transparent":b.blue,borderWidth:r?"2px":"2px 0px 2px 2px"}};return Object(f.jsx)(A.a.Group,{style:c,children:r.map((function(e,t){var a=e.content,c=e.value,i=0===t,o=t===r.length-1;return Object(f.jsx)(A.a,{content:a,onClick:function(){return n(c)},style:s(c,i,o)},t)}))})},G={family:"Franklin, sans-serif",size:14},W=[{content:"Subminute",value:!0},{content:"All",value:!1}],T=function(e){var t,n=e.stats,a=e.users,c=e.selectedUsers,s=Object(r.useState)(!1),i=Object(w.a)(s,2),o=i[0],l=i[1],u={labels:Object.keys(n).map((function(e){return I(e)})),datasets:c.map((function(e){var t=a.filter((function(t){return t.name===e}))[0].colour;return{label:e,data:Object.values(n).map((function(t){return t[e]})),backgroundColor:t,borderColor:"".concat(t,"A0"),spanGaps:!0,cubicInterpolationMode:"monotone",lineTension:.4}}))},d={animation:{onComplete:function(){t=!0},delay:function(e){var n=0;return"data"!==e.type||"default"!==e.mode||t||(n=50*e.dataIndex+50*e.datasetIndex),n}},interaction:{intersect:!1,mode:"index"},scales:{y:{display:!0,suggestedMax:120,max:o?60:null,title:{display:!0,text:"Time (secs)"}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){var t=e.dataset.label,n=e.parsed.y;return"".concat(t," - ").concat(C(n))}},itemSort:function(e,t){return t.dataset.data[t.dataIndex]-e.dataset.data[e.dataIndex]},titleFont:G,bodyFont:G,fotterFont:G}},maintainAspectRatio:!1};return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(f.jsx)(z,{state:o,setState:l,buttons:W,vertical:!0}),Object(f.jsx)("div",{style:{flexGrow:1},children:Object(f.jsx)(F.a,{data:u,options:d,style:{height:"50vh"}})})]})})},B={family:"Franklin, sans-serif",size:14},R=function(e){var t,n=e.eloToDisplay,r=e.users,a=e.selectedUsers,c={labels:Object.keys(n).map((function(e){return I(e)})),datasets:a.map((function(e){var t=r.filter((function(t){return t.name===e}))[0].colour;return{label:e,data:Object.values(n).map((function(t){return t[e]})),backgroundColor:t,borderColor:"".concat(t,"A0"),spanGaps:!0,cubicInterpolationMode:"monotone",lineTension:.4}}))},s={animation:{onComplete:function(){t=!0},delay:function(e){var n=0;return"data"!==e.type||"default"!==e.mode||t||(n=50*e.dataIndex+50*e.datasetIndex),n}},interaction:{intersect:!1,mode:"index"},scales:{y:{display:!0,title:{display:!0,text:"Elo rating"}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{itemSort:function(e,t){return t.dataset.data[t.dataIndex]-e.dataset.data[e.dataIndex]},titleFont:B,bodyFont:B,fotterFont:B}},maintainAspectRatio:!1};return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{style:{flexGrow:1},children:Object(f.jsx)(F.a,{data:c,options:s,style:{height:"50vh"}})})})},U=n(355),D={borderRadius:"7px",padding:"1rem"},E=function(e){return Object(f.jsx)(U.a,{style:D,children:e.children})},M=[{content:"Past 7 days",value:"week"},{content:"Past month",value:"month"},{content:"All time",value:"all time"}],L=[{content:"By Elo",value:"elo"},{content:"By Time",value:"time"}],N=function(e,t){return"week"===t?Object.entries(e).slice(-7).reduce((function(e,t){var n=Object(w.a)(t,2),r=n[0],a=n[1];return Object(o.a)(Object(o.a)({},e),{},Object(S.a)({},r,a))}),{}):"month"===t?Object.entries(e).slice(-30).reduce((function(e,t){var n=Object(w.a)(t,2),r=n[0],a=n[1];return Object(o.a)(Object(o.a)({},e),{},Object(S.a)({},r,a))}),{}):e},H=function(e){var t=e.stats,n=e.elo,a=e.users,c=e.selectedUsers,s=Object(r.useState)("week"),i=Object(w.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)("elo"),d=Object(w.a)(u,2),j=d[0],b=d[1],h=N(t,o),m=N(n,o);return Object(f.jsxs)(E,{children:[Object(f.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(f.jsx)(z,{state:j,setState:b,buttons:L})}),"elo"===j&&Object(f.jsx)(R,{eloToDisplay:m,users:a,selectedUsers:c}),"time"===j&&Object(f.jsx)(T,{stats:h,users:a,selectedUsers:c}),Object(f.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(f.jsx)(z,{state:o,setState:l,buttons:M})})]})},P=n(17),J="users",_="Stats Watcher",K=function(e){var t,n=(null===(t=new URL(window.location).searchParams.get(J))||void 0===t?void 0:t.split(","))||[],r=e.map((function(e){return e.name}));return n.filter((function(e){return r.includes(e)}))},V=function(e,t){return{display:"block",marginBottom:"1rem",padding:"0 1rem",height:"2rem",textAlign:"left",borderRadius:"7px",boxShadow:"0 3px 0 0 ".concat(e.includes(t.name)?j(t.colour):j(b.lightGrey)),backgroundColor:e.includes(t.name)?t.colour:b.lightGrey,fontWeight:"bold",color:e.includes(t.name)?b.white:b.black}},X=function(e){var t=e.users,n=e.selectedUsernames,r=e.setSelectedUsernames,a=function(e,t){var a=t.value,c=n.includes(a)?n.filter((function(e){return e!==a})):[].concat(Object(P.a)(n),[a]).sort((function(e,t){return e.localeCompare(t,"en",{sensitivity:"base"})}));c.length>0?function(e){var t=new URL(window.location);t.searchParams.set(J,e),window.history.replaceState(null,_,t)}(c):function(){var e=new URL(window.location);e.searchParams.delete(J),window.history.replaceState(null,_,e)}(),r(c)};return Object(f.jsx)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},children:t.map((function(e,t){return Object(f.jsx)(A.a,{content:e.name,value:e.name,onClick:a,style:V(n,e)},t)}))})},Y=n(350),Z=function(e){return Object(f.jsx)(Y.a,{style:{paddingTop:"24px",paddingBottom:"24px"},children:e.children})},q=n(351),Q={width:"208px",height:"290px",margin:"20px 10px",borderRadius:"7px",boxShadow:"0 7px 0 0 ".concat(b.darkBlue),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},$=function(e){var t=e.emoji,n=e.header,r=e.subheader,a=e.content;return Object(f.jsx)(U.a,{style:Q,children:Object(f.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1},children:[Object(f.jsx)("span",{style:{fontSize:"3rem",display:"block",margin:"4rem 0 1rem"},children:t}),Object(f.jsx)(m,{level:"h2",content:n}),Object(f.jsx)("span",{style:{fontSize:"1.125rem",display:"block"},children:a||""})]}),Object(f.jsx)("hr",{style:{lineHeight:1.5,background:b.lightGrey,border:0,height:"1px",width:"80%"}}),Object(f.jsx)("span",{style:{textTransform:"uppercase",color:b.grey,fontSize:"1rem",lineHeight:"1.1375rem",marginBottom:"1rem"},children:r})]})})},ee=function(e){var t=e.stats,n=e.username,r=Object.entries(t).filter((function(e){var t=Object(w.a)(e,2),r=(t[0],t[1]);return n in r})).sort((function(e,t){var r=Object(w.a)(e,2),a=(r[0],r[1]),c=Object(w.a)(t,2),s=(c[0],c[1]);return a[n]-s[n]})),a=r.length>0?[r[0][0],C(r[0][1][n])]:["N/A",void 0],c=Object(w.a)(a,2)[1];return Object(f.jsx)($,{emoji:"\u23f1",header:c,subheader:"Fastest time"})},te=function(e){var t=e.stats,n=e.username,r=Object.values(t).filter((function(e){return n in e})),a=r.length>0?C((r.reduce((function(e,t){return e+t[n]}),0)/r.length).toFixed(0)):"N/A";return Object(f.jsx)($,{emoji:"\ud83d\udcc8",header:a,subheader:"Average time"})},ne=function(e){var t=e.stats,n=e.username,r=Object.values(t).filter((function(e){return n in e})).filter((function(e){return e[n]===Math.min.apply(Math,Object(P.a)(Object.values(e)))})).length;return Object(f.jsx)($,{emoji:"\ud83e\udd47",header:"".concat(r),subheader:"Firsts"})},re=n(16),ae=function e(t,n){var r,a=Object(re.a)(t.entries());try{for(a.s();!(r=a.n()).done;){var c=Object(w.a)(r.value,2),s=c[0],i=Object(w.a)(c[1],2),o=i[0],l=i[1];if(n===o){if(s>0){var u=Object(w.a)(t[s-1],2),d=u[0];if(u[1]===l)return e(t,d)}return s+1}}}catch(j){a.e(j)}finally{a.f()}},ce=function(e){var t=e.elo,n=e.username,r=Object.values(t).slice(-1)[0]||{},a=Object.entries(r).sort((function(e,t){var n=Object(w.a)(e,2)[1];return Object(w.a)(t,2)[1]-n})),c=n in r?function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}(ae(a,n)):"N/A";return Object(f.jsx)($,{emoji:"\ud83c\udd9a",header:"".concat(c),subheader:"Overall rank"})},se=function(e){var t=e.users,n=e.stats,a=e.elo,c=Object(r.useState)("Hayeselnut"),s=Object(w.a)(c,2),i=s[0],o=s[1],l=t.map((function(e){return{key:e.name,text:e.name,value:e.name}}));return t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(m,{level:"h3",textAlign:"center",children:Object(f.jsx)(q.a,{inline:!0,options:l,defaultValue:i,onChange:function(e,t){var n=t.value;o(n)},style:{color:b.white}})}),Object(f.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center"},children:[Object(f.jsx)(te,{stats:n,username:i}),Object(f.jsx)(ee,{stats:n,username:i}),Object(f.jsx)(ce,{elo:a,username:i}),Object(f.jsx)(ne,{stats:n,username:i})]})]})},ie=n(138),oe=(n(336),n(195)),le=function(){var e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0===ie.a.apps.length&&ie.a.initializeApp(oe),t=ie.a.firestore(),e.next=4,t.collection("leaderboards").get();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:return t=e.sent,n={},t.forEach((function(e){n[e.id]=e.data()})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(e){var t=Object.values(d),n=[];return Object.values(e).map((function(e){n=[].concat(Object(P.a)(n),Object(P.a)(Object.keys(e)))})),Object(P.a)(new Set(n)).sort((function(e,t){return e.localeCompare(t,"en",{sensitivity:"base"})})).map((function(e,n){return{name:e,colour:t[n%t.length]}}))},je=function(e,t){var n={},r=t.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(S.a)({},t.name,[]))}),{});return Object.entries(e).forEach((function(e){var a=Object(w.a)(e,2),c=a[0],s=a[1];Object.entries(s).forEach((function(e){var t,n,a,c=Object(w.a)(e,2),s=c[0],i=c[1];(null===(t=r[s])||void 0===t?void 0:t.length)>=7&&(null===(a=r[s])||void 0===a||a.shift());null===(n=r[s])||void 0===n||n.push(i)}));var i={};t.forEach((function(e){var t;(null===(t=r[e.name])||void 0===t?void 0:t.length)>=7&&(i[e.name]=(1e5/r[e.name].reduce((function(e,t){return e+t}),0)).toFixed(0))})),Object.keys(i).length>0&&(n[c]=i)})),n},be=function(){var e=Object(r.useState)(!0),t=Object(w.a)(e,2),n=(t[0],t[1]),a=Object(r.useState)({}),c=Object(w.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)({}),l=Object(w.a)(o,2),u=l[0],d=l[1],j=Object(r.useState)([]),h=Object(w.a)(j,2),m=h[0],p=h[1],x=Object(r.useState)([]),O=Object(w.a)(x,2),y=O[0],S=O[1];return Object(r.useEffect)(Object(v.a)(g.a.mark((function e(){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:t=e.sent,i(t),r=de(t),p(r),S(K(r)),d(je(t,r)),n(!1);case 9:case"end":return e.stop()}}),e)}))),[]),Object(f.jsx)("div",{style:{borderTop:"1px solid ".concat(b.lightGrey)},children:Object(f.jsxs)(k.a,{children:[Object(f.jsx)(k.a.Row,{children:Object(f.jsxs)(Z,{children:[Object(f.jsx)(X,{users:m,selectedUsernames:y,setSelectedUsernames:S}),Object(f.jsx)(H,{stats:s,elo:u,users:m,selectedUsers:y})]})}),Object(f.jsx)(k.a.Row,{style:{backgroundColor:b.blue},children:Object(f.jsx)(Z,{children:Object(f.jsx)(se,{users:m,stats:s,elo:u})})})]})})},fe=n(94),he=(n(187),{color:"var(--nyt-black)"}),me=function(e){var t=e.href,n=e.target,r=e.rel;return Object(f.jsx)("a",{href:t,target:n,rel:r,style:he,children:e.children})},pe=(n(337),n(196)),xe={display:"flex",flexWrap:"wrap"},Oe=function(){return Object(f.jsx)(Z,{children:Object(f.jsxs)("div",{style:xe,children:[Object(f.jsxs)("div",{style:{flex:2},children:[Object(f.jsxs)("section",{children:[Object(f.jsx)(m,{level:"h5",content:"About"}),Object(f.jsxs)("p",{children:["I","'","m too broke to pay for the official ",Object(f.jsx)(me,{href:"https://www.nytimes.com/puzzles/stats",target:"_blank",rel:"noreferrer",children:"Statistics"})," so I made my own."]}),Object(f.jsxs)("p",{children:["A Python script scrapes the ",Object(f.jsx)(me,{href:"https://www.nytimes.com/puzzles/leaderboards",target:"_blank",rel:"noreferrer",children:"Leaderboard"})," everyday and stores each player","'","s times into a Google Firestore database."]}),Object(f.jsxs)("p",{children:["Charts are rendered using the ",Object(f.jsx)("code",{children:"chart.js"})," library and components have been styled to emulate the official NYT games pages."]})]}),Object(f.jsxs)("section",{children:[Object(f.jsx)(m,{level:"h5",content:"Elo formula"}),Object(f.jsx)("p",{children:"I rolled a dice and pulled this out of my ass:"}),Object(f.jsx)(pe.BlockMath,{math:"\\frac{100000}{\\text{sum of your most recent 7 game times}}"})]})]}),Object(f.jsxs)("section",{style:{flex:1,marginLeft:"4rem"},children:[Object(f.jsx)(m,{level:"h5",content:"Links"}),Object(f.jsx)("p",{children:Object(f.jsxs)(me,{href:"https://github.com/hayeselnut/nytimes-stats-watcher",target:"_blank",rel:"noreferrer",children:[Object(f.jsx)(fe.a,{fitted:!0,name:"github"})," GitHub"]})}),Object(f.jsx)("p",{children:Object(f.jsxs)(me,{href:"https://www.nytimes.com/crosswords/game/mini",target:"_blank",rel:"noreferrer",children:[Object(f.jsx)(fe.a,{fitted:!0,name:"grid layout"})," Mini Crossword"]})}),Object(f.jsx)("p",{children:Object(f.jsxs)(me,{href:"https://www.nytimes.com/puzzles/leaderboards",target:"_blank",rel:"noreferrer",children:[Object(f.jsx)(fe.a,{fitted:!0,name:"ordered list"})," Leaderboard"]})})]})]})})},ye=n(197),ge=n(20);n(339);s.a.render(Object(f.jsxs)(a.a.StrictMode,{children:[Object(f.jsx)("header",{children:Object(f.jsx)(O,{})}),Object(f.jsx)("main",{children:Object(f.jsx)(ye.a,{children:Object(f.jsx)(ge.c,{children:Object(f.jsx)(ge.a,{path:"/",component:be})})})}),Object(f.jsx)("footer",{children:Object(f.jsx)(Oe,{})})]}),document.getElementById("root"))}},[[341,1,2]]]);
//# sourceMappingURL=main.939d9abe.chunk.js.map